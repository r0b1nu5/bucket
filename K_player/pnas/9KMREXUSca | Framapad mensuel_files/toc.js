$("#tocButton").click(function(){$("#toc").toggle()}),$("#options-stickychat, #options-chatandusers").change(function(){tableOfContents.resize()}),$("#titlesticky, #titlecross").click(function(){tableOfContents.resize()});var tableOfContents={enable:function(){var t=180,e=180;$("#options-stickychat").prop("checked")&&(t=372,e=300),$("#toc").show().css("width",t+"px"),$("#editorcontainer").css("right",e+"px"),this.update()},disable:function(){if($("#toc:visible").length>0){$("#toc").hide();var t=0;$("#options-stickychat").prop("checked")&&(t=192),$("#editorcontainer").css("right",t+"px")}},resize:function(){$("#toc:visible").length>0&&this.enable()},findTags:function(){var t={},e={},n=0,i=["h1","h2","h3","h4","h5","h6",".h1",".h2",".h3",".h4",".h5",".h6"];if(clientVars.plugins.plugins.ep_context&&clientVars.plugins.plugins.ep_context.styles){var o=clientVars.plugins.plugins.ep_context.styles;$.each(o,function(t,e){var n="context"+e.toLowerCase();i.push(n)})}i=i.join(",");var s=$('iframe[name="ace_outer"]').contents().find("iframe").contents().find("#innerdocbody").children("div").children(i);$(s).each(function(){var i=$(this).parent().prevAll().length,o=this.nodeName.toLowerCase(),s=$(this).context.offsetTop+"px",c=$(this).text(),a=$(this).parent()[0].id;"span"==o&&(o=$(this).attr("class").replace(/.*(h[1-6]).*/,"$1"),c=c.replace(/\s*#*/,"")),e[i]=o,e[i-1]&&e[i-1]===o||(t[n]={tag:o,y:s,text:c,focusId:a,lineNumber:i},n++)}),clientVars.plugins.plugins.ep_table_of_context=t,$.each(t,function(t,e){var n="<a title='"+e.text+"' class='tocItem toc"+e.tag+"' data-class='toc"+e.tag+"' onClick=\"tableOfContents.scroll('"+e.y+"');\" data-offset='"+e.y+"'>"+e.text+"</a>";$("#tocItems").append(n)})},getPadHTML:function(t){$("#options-toc").is(":checked")&&($("#tocItems").html(""),tableOfContents.findTags())},showPosition:function(t){var e=clientVars.plugins.plugins.ep_table_of_context;if(!e)return!1;var n=t.selEnd[0];$.each(e,function(t,i){if(n>=i.lineNumber){var o=e[t];if(o.lineNumber<=n){var s=parseInt(t)+1;$(".tocItem").each(function(){$(this).removeClass("activeTOC")}),$(".toch"+s).addClass("activeTOC")}}})},update:function(t){tableOfContents.getPadHTML(t)},scroll:function(t){var e=$('iframe[name="ace_outer"]').contents().find("#outerdocbody"),n=e.parent();e.animate({scrollTop:t}),n.animate({scrollTop:t})},getParam:function(t){var e=location.search.substr(location.search.indexOf("?")+1),n="";e=e.split("&");for(var i=0;i<e.length;i++)temp=e[i].split("="),[temp[0]]==t&&(n=temp[1]);return n}};